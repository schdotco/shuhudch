<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KPSP Anak 24 Bulan</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f6f9;
  padding:20px;
}
.card{
  background:#fff;
  padding:20px;
  border-radius:8px;
  max-width:900px;
  margin:auto;
}
h2,h3{margin-top:0}
.field{margin-bottom:12px}
label{font-weight:bold;display:block;margin-bottom:4px}
input[type=text],
input[type=date]{
  width:100%;
  padding:8px;
  border:1px solid #ced4da;
  border-radius:4px;
}
.question{
  margin-bottom:14px;
}
.options{
  display:flex;
  gap:24px;
  margin-top:6px;
}
.options label{
  font-weight:normal;
}
button{
  margin-top:20px;
  padding:12px 18px;
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:4px;
  font-size:15px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="card">
<h2>Kuesioner Pra Skrining Perkembangan (KPSP)</h2>
<h3>Anak Umur 24 Bulan</h3>

<!-- IDENTITAS -->
<div class="field">
  <label>Nama Anak</label>
  <input type="text" id="nama" placeholder="Nama anak">
</div>

<div class="field">
  <label>NIK Anak</label>
  <input type="text" id="nik" placeholder="16 digit NIK" maxlength="16">
</div>

<div class="field">
  <label>Tanggal Lahir</label>
  <input type="date" id="tglLahir">
</div>

<hr>

<!-- PERTANYAAN (TEKS ASLI – TIDAK DIUBAH) -->

<div class="question">
<label>1. Bayi dipangku orang tua atau pengasuh. Berikan anak sebuah pensil 
dan kertas. Apakah anak dapat mencoret-coret kertas tanpa bantuan 
atau petunjuk?</label>
<div class="options">
  <label><input type="radio" name="q1" value="Ya"> Ya</label>
  <label><input type="radio" name="q1" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>2. Bayi dipangku orang tua atau pengasuh. Minta anak untuk menyusun 
kubus. Apakah anak dapat menyusun 4 kubus?</label>
<div class="options">
  <label><input type="radio" name="q2" value="Ya"> Ya</label>
  <label><input type="radio" name="q2" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>3. Bayi dipangku orang tua atau pengasuh. Tanpa bimbingan, petunjuk,
atau bantuan Anda, dapatkah anak menunjuk paling sedikit 2 bagian 
tubuhnya dengan benar (rambut, mata, hidung, mulut, atau bagian 
badan yang lain)?</label>
<div class="options">
  <label><input type="radio" name="q3" value="Ya"> Ya</label>
  <label><input type="radio" name="q3" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>4. Tanyakan kepada orang tua atau pengasuh, apakah anak mampu 
menggabungkan 2 kata berbeda ketika berbicara, misalnya “Minum 
susu” atau “Main bola”? “Terima kasih” dan “Da-dah” tidak termasuk/label>
<div class="options">
  <label><input type="radio" name="q4" value="Ya"> Ya</label>
  <label><input type="radio" name="q4" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>5. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat 
melepas pakaiannya seperti baju, rok, atau celana?</label>
<div class="options">
  <label><input type="radio" name="q5" value="Ya"> Ya</label>
  <label><input type="radio" name="q5" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>6. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat makan 
dengan menggunakan sendok sendiri tanpa banyak yang tumpah?</label>
<div class="options">
  <label><input type="radio" name="q6" value="Ya"> Ya</label>
  <label><input type="radio" name="q6" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>7. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat berlari 
tanpa terjatuh?</label>
<div class="options">
  <label><input type="radio" name="q7" value="Ya"> Ya</label>
  <label><input type="radio" name="q7" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>8. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat 
berjalan naik tangga sendiri? Jawab ‘Ya’ jika ia naik tangga dengan 
posisi tegak atau berpegangan pada dinding atau pegangan tangga. 
Jawab ‘Tidak’ jika ia naik tangga dengan merangkak, orang tua tidak
memperbolehkan anak naik tangga, atau anak harus berpegangan pada 
seseorang.</label>
<div class="options">
  <label><input type="radio" name="q8" value="Ya"> Ya</label>
  <label><input type="radio" name="q8" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>9. Letakkan bola tenis di depan kaki anak. Apakah ia dapat menendang ke 
depan tanpa berpegangan pada apapun?</label>
<div class="options">
  <label><input type="radio" name="q9" value="Ya"> Ya</label>
  <label><input type="radio" name="q9" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>10. Ikuti perintah dengan seksama. Jangan memberi isyarat dengan
telunjuk atau mata pada saat memberikan perintah berikut ini:
“Ambil kertas”
“Ambil pensil”
“Tutup pintu”
Dapatkah anak melakukan perintah tersebut?</label>
<div class="options">
  <label><input type="radio" name="q10" value="Ya"> Ya</label>
  <label><input type="radio" name="q10" value="Tidak"> Tidak</label>
</div>
</div>

<button onclick="simpan()">Simpan KPSP 24 Bulan</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBk57WWCAV9PbUQBb_bj7mPtl09oNz7WnA",
  authDomain: "schesakra.firebaseapp.com",
  databaseURL: "https://schesakra-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "schesakra",
  storageBucket: "schesakra.firebasestorage.app",
  messagingSenderId: "672537227977",
  appId: "1:672537227977:web:88b24f905c86eba7c05318"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function valRadio(name){
  const r = document.querySelector(`input[name="${name}"]:checked`);
  return r ? r.value : "";
}

function simpan(){

  /* ================= VALIDASI IDENTITAS ================= */
  if(!nama.value.trim()){
    alert("Nama anak wajib diisi");
    nama.focus();
    return;
  }

  if(!nik.value.trim() || nik.value.length !== 16){
    alert("NIK wajib diisi 16 digit");
    nik.focus();
    return;
  }

  if(!tglLahir.value){
    alert("Tanggal lahir wajib diisi");
    tglLahir.focus();
    return;
  }

  /* ================= VALIDASI PERTANYAAN ================= */
  for(let i=1;i<=10;i++){
    if(valRadio(`q${i}`) === ""){
      alert(`Pertanyaan nomor ${i} belum dijawab`);
      return;
    }
  }

  /* ================= SIMPAN KE FIREBASE ================= */
  const data = {
    nama: nama.value.trim(),
    nik: nik.value.trim(),
    tanggal_lahir: tglLahir.value,
    usia: 24,
    jawaban:{
      q1: valRadio("q1"),
      q2: valRadio("q2"),
      q3: valRadio("q3"),
      q4: valRadio("q4"),
      q5: valRadio("q5"),
      q6: valRadio("q6"),
      q7: valRadio("q7"),
      q8: valRadio("q8"),
      q9: valRadio("q9"),
      q10: valRadio("q10")
    },
    timestamp: Date.now()
  };

  db.ref("kpsp_respon").push(data)
    .then(()=>{
      alert("Data KPSP 24 bulan berhasil disimpan");
      location.href="index.html";
    })
    .catch(err=>alert(err.message));
}
</script>

</body>
</html>
