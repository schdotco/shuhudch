<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KPSP Anak 15 Bulan</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f6f9;
  padding:20px;
}
.card{
  background:#fff;
  padding:20px;
  border-radius:8px;
  max-width:900px;
  margin:auto;
}
h2,h3{margin-top:0}
.field{margin-bottom:12px}
label{font-weight:bold;display:block;margin-bottom:4px}
input[type=text],
input[type=date]{
  width:100%;
  padding:8px;
  border:1px solid #ced4da;
  border-radius:4px;
}
.question{
  margin-bottom:14px;
}
.options{
  display:flex;
  gap:24px;
  margin-top:6px;
}
.options label{
  font-weight:normal;
}
button{
  margin-top:20px;
  padding:12px 18px;
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:4px;
  font-size:15px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="card">
<h2>Kuesioner Pra Skrining Perkembangan (KPSP)</h2>
<h3>Anak Umur 15 Bulan</h3>

<!-- IDENTITAS -->
<div class="field">
  <label>Nama Anak</label>
  <input type="text" id="nama" placeholder="Nama anak">
</div>

<div class="field">
  <label>NIK Anak</label>
  <input type="text" id="nik" placeholder="16 digit NIK" maxlength="16">
</div>

<div class="field">
  <label>Tanggal Lahir</label>
  <input type="date" id="tglLahir">
</div>

<hr>

<!-- PERTANYAAN (TEKS ASLI – TIDAK DIUBAH) -->

<div class="question">
<label>1. Bayi dipangku orang tua atau pengasuh. Berikan 2 kubus kepada anak. Tanpa
bantuan, apakah anak dapat mempertemukan 2 kubus kecil yang ia pegang?</label>
<div class="options">
  <label><input type="radio" name="q1" value="Ya"> Ya</label>
  <label><input type="radio" name="q1" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>2. Bayi dipangku orang tua atau pengasuh. Berikan sebuah kubus dan cangkir. 
Apakah anak dapat memasukkan 1 kubus ke dalam cangkir?</label>
<div class="options">
  <label><input type="radio" name="q2" value="Ya"> Ya</label>
  <label><input type="radio" name="q2" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>3. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat berjalan 
dengan berpegangan?</label>
<div class="options">
  <label><input type="radio" name="q3" value="Ya"> Ya</label>
  <label><input type="radio" name="q3" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>4. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat mengatakan 
‘papa’ ketika ia memanggil atau melihat ayahnya, atau mengatakan ‘mama’
jika memanggil atau melihat ibunya? Jawab ‘Ya’ bila anak mengatakan salah 
satu di antaranya.</label>
<div class="options">
  <label><input type="radio" name="q4" value="Ya"> Ya</label>
  <label><input type="radio" name="q4" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>5. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat mengucapkan 
1 kata yang bermakna selain ‘mama’, ‘papa’, atau nama panggilan orang?</label>
<div class="options">
  <label><input type="radio" name="q5" value="Ya"> Ya</label>
  <label><input type="radio" name="q5" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>6. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat bertepuk tangan
atau melambai-lambai tanpa bantuan? Jawab ‘Tidak’ bila ia membutuhkan
bantuan.</label>
<div class="options">
  <label><input type="radio" name="q6" value="Ya"> Ya</label>
  <label><input type="radio" name="q6" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>7. Tanyakan kepada orang tua atau pengasuh, apakah anak dapat menunjukkan 
apa yang diinginkannya tanpa menangis atau merengek? Jawab ‘Ya’ bila ia 
menunjuk, menarik atau mengeluarkan suara yang menyenangkan.</label>
<div class="options">
  <label><input type="radio" name="q7" value="Ya"> Ya</label>
  <label><input type="radio" name="q7" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>8. Coba berdirikan anak. Apakah anak dapat berdiri sendiri tanpa berpegangan
selama 30 detik atau lebih?</label>
<div class="options">
  <label><input type="radio" name="q8" value="Ya"> Ya</label>
  <label><input type="radio" name="q8" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>9. Letakkan kubus di lantai, tanpa berpegangan atau menyentuh lantai, apakah 
anak dapat membungkuk untuk memungut kubus di lantai dan kemudian 
berdiri kembali?</label>
<div class="options">
  <label><input type="radio" name="q9" value="Ya"> Ya</label>
  <label><input type="radio" name="q9" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>10. Apakah anak dapat berjalan di sepanjang ruangan tanpa jatuh atau
terhuyung-huyung?</label>
<div class="options">
  <label><input type="radio" name="q10" value="Ya"> Ya</label>
  <label><input type="radio" name="q10" value="Tidak"> Tidak</label>
</div>
</div>

<button onclick="simpan()">Simpan KPSP 15 Bulan</button>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBk57WWCAV9PbUQBb_bj7mPtl09oNz7WnA",
  authDomain: "schesakra.firebaseapp.com",
  databaseURL: "https://schesakra-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "schesakra",
  storageBucket: "schesakra.firebasestorage.app",
  messagingSenderId: "672537227977",
  appId: "1:672537227977:web:88b24f905c86eba7c05318"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function valRadio(name){
  const r = document.querySelector(`input[name="${name}"]:checked`);
  return r ? r.value : "";
}

function simpan(){

  /* ================= VALIDASI IDENTITAS ================= */
  if(!nama.value.trim()){
    alert("Nama anak wajib diisi");
    nama.focus();
    return;
  }

  if(!nik.value.trim() || nik.value.length !== 16){
    alert("NIK wajib diisi 16 digit");
    nik.focus();
    return;
  }

  if(!tglLahir.value){
    alert("Tanggal lahir wajib diisi");
    tglLahir.focus();
    return;
  }

  /* ================= VALIDASI PERTANYAAN ================= */
  for(let i=1;i<=10;i++){
    if(valRadio(`q${i}`) === ""){
      alert(`Pertanyaan nomor ${i} belum dijawab`);
      return;
    }
  }

  /* ================= SIMPAN KE FIREBASE ================= */
  const data = {
    nama: nama.value.trim(),
    nik: nik.value.trim(),
    tanggal_lahir: tglLahir.value,
    usia: 15,
    jawaban:{
      q1: valRadio("q1"),
      q2: valRadio("q2"),
      q3: valRadio("q3"),
      q4: valRadio("q4"),
      q5: valRadio("q5"),
      q6: valRadio("q6"),
      q7: valRadio("q7"),
      q8: valRadio("q8"),
      q9: valRadio("q9"),
      q10: valRadio("q10")
    },
    timestamp: Date.now()
  };

  db.ref("kpsp_respon").push(data)
    .then(()=>{
      alert("Data KPSP 15 bulan berhasil disimpan");
      location.href="index.html";
    })
    .catch(err=>alert(err.message));
}
</script>

</body>
</html>
