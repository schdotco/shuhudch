<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>KPSP Bayi 3 Bulan</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f4f6f9;
  margin:0;
  padding:20px;
}

/* TOPBAR */
.topbar{
  background:#0d6efd;
  color:#fff;
  padding:16px 20px;
  border-radius:10px;
  margin-bottom:20px;
}
.topbar h2{
  margin:0;
  font-size:20px;
}
.topbar small{
  opacity:.9;
}

/* CARD */
.card{
  background:#fff;
  padding:20px;
  border-radius:10px;
  max-width:900px;
  margin:auto;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
}

.section-title{
  font-size:16px;
  font-weight:bold;
  margin-bottom:10px;
  border-bottom:2px solid #e9ecef;
  padding-bottom:6px;
}

/* FORM */
.field{
  margin-bottom:12px;
}
label{
  font-weight:bold;
  font-size:14px;
  display:block;
  margin-bottom:4px;
}
input[type=text],
input[type=date]{
  width:100%;
  padding:8px;
  border:1px solid #ced4da;
  border-radius:6px;
  font-size:14px;
}

/* QUESTION */
.question{
  margin-bottom:16px;
  padding-bottom:10px;
  border-bottom:1px dashed #dee2e6;
}
.question:last-child{
  border-bottom:none;
}
.question label{
  font-weight:normal;
}

/* OPTIONS */
.options{
  display:flex;
  gap:20px;
  margin-top:6px;
}
.options label{
  font-weight:normal;
  cursor:pointer;
}

/* BUTTON */
button{
  margin-top:20px;
  padding:12px 20px;
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:6px;
  font-size:15px;
  cursor:pointer;
}
button:hover{
  background:#084298;
}

/* RESPONSIVE */
@media(max-width:600px){
  .options{
    flex-direction:column;
    gap:6px;
  }
}
</style>
</head>

<body>

<div class="topbar">
  <h2>Kuesioner KPSP</h2>
  <small>Bayi Usia 6 Bulan</small>
</div>

<div class="card">

<div class="section-title">Identitas Anak</div>

<div class="field">
  <label>Nama Anak</label>
  <input type="text" id="nama" placeholder="Nama anak">
</div>

<div class="field">
  <label>NIK Anak</label>
  <input type="text" id="nik" placeholder="16 digit NIK" maxlength="16">
</div>

<div class="field">
  <label>Tanggal Lahir</label>
  <input type="date" id="tglLahir">
</div>

<div class="section-title">Pertanyaan KPSP</div>

<div class="question">
<label>1. Pada saat bayi terlentang, apakah masing-masing lengan dan tungkai bergerak dengan mudah ?  <br>
Jawab Tidak bila salah satu atau kedua tungkai atau lengan bayi bergerak tak terarah atau terkendali </label>
<div class="options">
  <label><input type="radio" name="q1" value="Ya"> Ya</label>
  <label><input type="radio" name="q1" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>2. Jangan membuat suara apapun. Pada saat bayi terlentang apakah ia melihat dan menatap wajah Anda? </label>
<div class="options">
  <label><input type="radio" name="q2" value="Ya"> Ya</label>
  <label><input type="radio" name="q2" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>3. Pada saat Anda mengajak bayi berbicara dan tersenyum, apakah ia tersenyum kembali kepada Anda?</label>
<div class="options">
  <label><input type="radio" name="q3" value="Ya"> Ya</label>
  <label><input type="radio" name="q3" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>4.Apakah bayi dapat mengeluarkan suara-suara lain (mengoceh) selain
menangis?</label>
<div class="options">
  <label><input type="radio" name="q4" value="Ya"> Ya</label>
  <label><input type="radio" name="q4" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>5.Apakah bayi suka tertawa keras walau tidak digelitik atau diraba-raba?</label>
<div class="options">
  <label><input type="radio" name="q5" value="Ya"> Ya</label>
  <label><input type="radio" name="q5" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>6. Ambil gulungan wool merah, lalu letakkan di atas wajah di depan mata bayi. Gerakkan wool dari samping kiri ke 
kanan kepala atau sebaliknya. <br> 
Apakah ia dapat mengikuti gerakan Anda dengan menggerakkan kepalanya dari kanan atau kiri ke tengah?</label>
<div class="options">
  <label><input type="radio" name="q6" value="Ya"> Ya</label>
  <label><input type="radio" name="q6" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>7. Ambil gulungan wool merah, lalu letakkan di atas wajah di depan mata bayi. <br>
Gerakkan wool dari samping kiri ke kanan kepala atau sebaliknya. <br>
Apakah ia dapat mengikuti gerakan Anda dengan menggerakkan kepalanya dari satu sisi hampir sampai pada sisi yang lain?</label>
<div class="options">
  <label><input type="radio" name="q7" value="Ya"> Ya</label>
  <label><input type="radio" name="q7" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>8. Pada saat bayi tengkurap di alas yang datar, apakah ia dapat mengangkat kepalanya seperti pada gambar?</label>
<div class="options">
  <label><input type="radio" name="q8" value="Ya"> Ya</label>
  <label><input type="radio" name="q8" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>9. Pada saat bayi tengkurap di alas yang datar, apakah ia dapat mengangkat kepalanya sehingga membentuk sudut 45Ëš seperti pada gambar?</label>
<div class="options">
  <label><input type="radio" name="q9" value="Ya"> Ya</label>
  <label><input type="radio" name="q9" value="Tidak"> Tidak</label>
</div>
</div>

<div class="question">
<label>10. Pada saat bayi tengkurap di alas yang datar, apakah ia dapat mengangkat kepalanya dengan tegak seperti pada gambar?</label>
<div class="options">
  <label><input type="radio" name="q10" value="Ya"> Ya</label>
  <label><input type="radio" name="q10" value="Tidak"> Tidak</label>
</div>
</div>

<button onclick="simpan()">Simpan KPSP 3 Bulan</button>

</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyBk57WWCAV9PbUQBb_bj7mPtl09oNz7WnA",
  authDomain: "schesakra.firebaseapp.com",
  databaseURL: "https://schesakra-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "schesakra",
  storageBucket: "schesakra.firebasestorage.app",
  messagingSenderId: "672537227977",
  appId: "1:672537227977:web:88b24f905c86eba7c05318"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();

function valRadio(name){
  const r = document.querySelector(`input[name="${name}"]:checked`);
  return r ? r.value : "";
}

function simpan(){

  /* ================= VALIDASI IDENTITAS ================= */
  if(!nama.value.trim()){
    alert("Nama anak wajib diisi");
    nama.focus();
    return;
  }

  if(!nik.value.trim() || nik.value.length !== 16){
    alert("NIK wajib diisi 16 digit");
    nik.focus();
    return;
  }

  if(!tglLahir.value){
    alert("Tanggal lahir wajib diisi");
    tglLahir.focus();
    return;
  }

  /* ================= VALIDASI PERTANYAAN ================= */
  for(let i=1;i<=10;i++){
    if(valRadio(`q${i}`) === ""){
      alert(`Pertanyaan nomor ${i} belum dijawab`);
      return;
    }
  }

  /* ================= SIMPAN KE FIREBASE ================= */
  const data = {
    nama: nama.value.trim(),
    nik: nik.value.trim(),
    tanggal_lahir: tglLahir.value,
    usia:3,
    jawaban:{
      q1: valRadio("q1"),
      q2: valRadio("q2"),
      q3: valRadio("q3"),
      q4: valRadio("q4"),
      q5: valRadio("q5"),
      q6: valRadio("q6"),
      q7: valRadio("q7"),
      q8: valRadio("q8"),
      q9: valRadio("q9"),
      q10: valRadio("q10")
    },
    timestamp: Date.now()
  };

  db.ref("kpsp_respon").push(data)
    .then(()=>{
      alert("Data KPSP 6 bulan berhasil disimpan");
      location.href="index.html";
    })
    .catch(err=>alert(err.message));
}
</script>

</body>
</html>
